<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title>
Проксирование через Nginx | Dashboard для OpenVPN
</title>

    <link rel="canonical" href="https:&#x2F;&#x2F;docs.dfov.ru">

    
<meta name="Description" content="Настройка Nginx для работы с приложением Dashboard for OpenVPN">


    

    <meta name="keywords" content="Документация к Dashboard for OpenVPN, Dashboard for OpenVPN, документация">



    
    <meta property="og:title" content="Dashboard для OpenVPN" />
    

    
<meta property="og:description" content="Настройка Nginx для работы с приложением Dashboard for OpenVPN"/>


    
<meta property="og:url" content="/configuration&#x2F;proxy-with-nginx&#x2F;" />


    
    <meta property="og:type" content="article" />
    

    

    

<!-- Yandex.Webmaster Verification Code -->
<meta name="yandex-verification" content="d3b6833bf861a888" />



    <link rel="icon" type="image&#x2F;x-icon" href="/favicon.ico">

    
    

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Montserrat:wght@700;800&display=swap"
          rel="stylesheet">

    <!-- CSS -->
    
    <link rel="stylesheet" href="https://docs.dfov.ru/style.css">
    

    
    
</head>

<body>
    <div class="menu">
        
        <div class="menu__header">
            <div class="menu__header__kind text-color-secondary">
                ДОКУМЕНТАЦИЯ
            </div>
            <h2>Dashboard для OpenVPN</h2>

            
            <div style="margin-top: 20px; margin-bottom: 10px">
                <a href="https:&#x2F;&#x2F;dfov.ru" target="_blank" title="Перейти на сайт"
                   class="menu__header__site-link">Сайт</a>
            </div>
            
        </div>

        
        <nav role="navigation">
            <ul>
                
                    
                    
                        
                        <li>
                            
                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;intro&#x2F;"
                               
                               class="font-weight-bold"
                            >
                                <strong>1.</strong>
                                Введение
                            </a>
                            
                        </li>
                    
                        
                        <li>
                            
                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;installation&#x2F;"
                               
                               class="font-weight-bold"
                            >
                                <strong>2.</strong>
                                Установка
                            </a>
                            
                        </li>
                    
                        
                        <li>
                            
                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;configuration&#x2F;"
                               
                               class="font-weight-bold"
                            >
                                <strong>3.</strong>
                                Настройка
                            </a>
                            
                                <ul>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;configuration&#x2F;web-config&#x2F;">
                                                <strong>3.1.</strong>
                                                Настройка через Web-интерфейс
                                            </a>
                                        </li>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;configuration&#x2F;app-port&#x2F;">
                                                <strong>3.2.</strong>
                                                Настройка порта приложения
                                            </a>
                                        </li>
                                    
                                        <li class="active">
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;configuration&#x2F;proxy-with-nginx&#x2F;">
                                                <strong>3.3.</strong>
                                                Проксирование через Nginx
                                            </a>
                                        </li>
                                    
                                </ul>
                            
                        </li>
                    
                        
                        <li>
                            
                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;manage-users&#x2F;"
                               
                               class="font-weight-bold"
                            >
                                <strong>4.</strong>
                                Управление пользователями
                            </a>
                            
                                <ul>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;manage-users&#x2F;create-users&#x2F;">
                                                <strong>4.1.</strong>
                                                Создание пользователей
                                            </a>
                                        </li>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;manage-users&#x2F;create-ovpn&#x2F;">
                                                <strong>4.2.</strong>
                                                Как создать профиль подключения
                                            </a>
                                        </li>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;manage-users&#x2F;block-users&#x2F;">
                                                <strong>4.3.</strong>
                                                Блокировка пользователей
                                            </a>
                                        </li>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;manage-users&#x2F;unlock-users&#x2F;">
                                                <strong>4.4.</strong>
                                                Разблокировка пользователей
                                            </a>
                                        </li>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;manage-users&#x2F;new-credentials&#x2F;">
                                                <strong>4.5.</strong>
                                                Перевыпуск сертификата и ключа пользователя
                                            </a>
                                        </li>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;manage-users&#x2F;import-users&#x2F;">
                                                <strong>4.6.</strong>
                                                Импорт пользователей
                                            </a>
                                        </li>
                                    
                                </ul>
                            
                        </li>
                    
                        
                        <li>
                            
                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;openvpn&#x2F;"
                               
                               class="font-weight-bold"
                            >
                                <strong>5.</strong>
                                OpenVPN
                            </a>
                            
                                <ul>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;openvpn&#x2F;config-ovpn-client&#x2F;">
                                                <strong>5.1.</strong>
                                                Настройка OpenVPN-клиента
                                            </a>
                                        </li>
                                    
                                        <li >
                                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;openvpn&#x2F;install-openvpn-server-centos7&#x2F;">
                                                <strong>5.2.</strong>
                                                Установка и настройка OpenVPN сервера для CentOS 7
                                            </a>
                                        </li>
                                    
                                </ul>
                            
                        </li>
                    
                        
                        <li>
                            
                            <a href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;troubleshooting&#x2F;"
                               
                               class="font-weight-bold"
                            >
                                <strong>6.</strong>
                                Решение проблем
                            </a>
                            
                        </li>
                    
                
            </ul>
        </nav>
        
        
    </div>

    <div class="page">
        <div class="page__header">
            <div class="menu-icon">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <div class="page__content">
            <div class="book-content">
                
    <h1 class="page-title">Проксирование через Nginx</h1>
    <p>Для дистрибутивов Red Hat Enterprise Linux и CentOS путь к файлам конфигураций nginx по умолчанию такой <code>/etc/nginx/conf.d</code>.
В других дистрибутивах путь может быть другой.</p>
<p>Также для примера возьмём адрес для приложения <code>vpn.company.ru</code>.</p>
<p>Создадим файл конфигурации <code>/etc/nginx/conf.d/vpn.company.ru.conf</code>:</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">server {</span><span style="color:#c0c5ce;">
    listen 80;</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
    server_name  vpn.company.ru;</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
    location / {</span><span style="color:#c0c5ce;">
        proxy_redirect off;</span><span style="color:#c0c5ce;">
        proxy_set_header Host $host;      </span><span style="color:#c0c5ce;">
        proxy_pass http://127.0.0.1:8080;</span><span style="color:#c0c5ce;">
    }</span><span style="color:#c0c5ce;">
}</span><span style="color:#c0c5ce;">
</span></pre>
<p>Далее проверяем что конфигурация не содержит ошибок:</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">[root@server ~]# nginx -t</span><span style="color:#c0c5ce;">
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><span style="color:#c0c5ce;">
nginx: configuration file /etc/nginx/nginx.conf test is successful</span><span style="color:#c0c5ce;">
</span></pre>
<p>И принуждаем nginx перечитать настройки:</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">systemctl reload nginx</span><span style="color:#c0c5ce;">
</span></pre><h3 id="nastroika-https">Настройка HTTPS</h3>
<p>Настройка HTTPS выходит за рамки этой статьи, вкратце - можно использовать Let's Encrypt и установить сертификат в несколько шагов:</p>
<ol>
<li>Установить на сервер certbot.</li>
<li>Запустить <code>certbot</code> и ответить на его вопросы.</li>
</ol>
<p>Бот настроить всё сам и сделает переадресацию с HTTP на HTTPS. </p>


            </div>
        </div>

        <div class="prev-link">
            
    
        <a class="previous" href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;configuration&#x2F;app-port&#x2F;"><</a>
    

        </div>

        <div class="next-link">
            
    
        
        
        
        
            
            
            
        
            
            
            
        
            
            
            
                
            
                
            
                
                    
                
            
        
            
            
                <a class="next" href="https:&#x2F;&#x2F;docs.dfov.ru&#x2F;manage-users&#x2F;">></a>
                
                
            
            
                
            
                
            
                
            
                
            
                
            
                
            
        
            
            
            
                
            
                
            
        
            
            
            
        
    

        </div>
    </div>

    <script type="text/javascript" src="https://docs.dfov.ru/theme.js"></script>
    

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(66871291, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
    });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/66871291"
                    style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->


</body>
</html>
